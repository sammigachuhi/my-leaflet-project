<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 6 Create your own custom markers | Leaflet in Practice: Create webmaps using the JavaScript Leaflet library</title>
  <meta name="description" content="<p>This is a minimal example of using the bookdown package to write a book.
The HTML output format for this example is bookdown::gitbook,
set in the _output.yml file.</p>" />
  <meta name="generator" content="bookdown 0.34 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 6 Create your own custom markers | Leaflet in Practice: Create webmaps using the JavaScript Leaflet library" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="<p>This is a minimal example of using the bookdown package to write a book.
The HTML output format for this example is bookdown::gitbook,
set in the _output.yml file.</p>" />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 Create your own custom markers | Leaflet in Practice: Create webmaps using the JavaScript Leaflet library" />
  
  <meta name="twitter:description" content="<p>This is a minimal example of using the bookdown package to write a book.
The HTML output format for this example is bookdown::gitbook,
set in the _output.yml file.</p>" />
  

<meta name="author" content="Samuel Gachuhi Ngugi" />


<meta name="date" content="2023-07-22" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="using-geojson-in-leaflet.html"/>
<link rel="next" href="creating-an-interactive-choropleth-map.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#usage"><i class="fa fa-check"></i>Usage</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#about-the-author"><i class="fa fa-check"></i>About the Author</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#copyright"><i class="fa fa-check"></i>Copyright</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#what-is-leaflet"><i class="fa fa-check"></i><b>1.1</b> What is Leaflet?</a></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#how-does-it-work"><i class="fa fa-check"></i><b>1.2</b> How does it work?</a></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#javascript"><i class="fa fa-check"></i><b>1.3</b> JavaScript</a></li>
<li class="chapter" data-level="1.4" data-path="introduction.html"><a href="introduction.html#css-files"><i class="fa fa-check"></i><b>1.4</b> CSS files</a></li>
<li class="chapter" data-level="1.5" data-path="introduction.html"><a href="introduction.html#summary"><i class="fa fa-check"></i><b>1.5</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="first-leaflet-map.html"><a href="first-leaflet-map.html"><i class="fa fa-check"></i><b>2</b> First Leaflet Map</a>
<ul>
<li class="chapter" data-level="2.1" data-path="first-leaflet-map.html"><a href="first-leaflet-map.html#setting-the-superstructure"><i class="fa fa-check"></i><b>2.1</b> Setting the superstructure</a></li>
<li class="chapter" data-level="2.2" data-path="first-leaflet-map.html"><a href="first-leaflet-map.html#beautifying-the-house"><i class="fa fa-check"></i><b>2.2</b> Beautifying the house</a></li>
<li class="chapter" data-level="2.3" data-path="first-leaflet-map.html"><a href="first-leaflet-map.html#summary-1"><i class="fa fa-check"></i><b>2.3</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="add-ons.html"><a href="add-ons.html"><i class="fa fa-check"></i><b>3</b> Add ons</a>
<ul>
<li class="chapter" data-level="3.1" data-path="add-ons.html"><a href="add-ons.html#not-just-a-plain-map"><i class="fa fa-check"></i><b>3.1</b> Not just a plain map</a></li>
<li class="chapter" data-level="3.2" data-path="add-ons.html"><a href="add-ons.html#a-marker"><i class="fa fa-check"></i><b>3.2</b> A marker</a></li>
<li class="chapter" data-level="3.3" data-path="add-ons.html"><a href="add-ons.html#a-marker-with-a-popup"><i class="fa fa-check"></i><b>3.3</b> A marker with a popup</a></li>
<li class="chapter" data-level="3.4" data-path="add-ons.html"><a href="add-ons.html#different-markers-and-popups"><i class="fa fa-check"></i><b>3.4</b> Different markers and popups</a></li>
<li class="chapter" data-level="3.5" data-path="add-ons.html"><a href="add-ons.html#summary-2"><i class="fa fa-check"></i><b>3.5</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="embedding-leaflet-map-to-an-external-website.html"><a href="embedding-leaflet-map-to-an-external-website.html"><i class="fa fa-check"></i><b>4</b> Embedding leaflet map to an external website</a>
<ul>
<li class="chapter" data-level="4.1" data-path="embedding-leaflet-map-to-an-external-website.html"><a href="embedding-leaflet-map-to-an-external-website.html#a-website-with-a-sense-of-direction"><i class="fa fa-check"></i><b>4.1</b> A website with a sense of direction</a></li>
<li class="chapter" data-level="4.2" data-path="embedding-leaflet-map-to-an-external-website.html"><a href="embedding-leaflet-map-to-an-external-website.html#the-html-webpage"><i class="fa fa-check"></i><b>4.2</b> The HTML webpage</a></li>
<li class="chapter" data-level="4.3" data-path="embedding-leaflet-map-to-an-external-website.html"><a href="embedding-leaflet-map-to-an-external-website.html#a-simple-for-loop-for-webmap-display"><i class="fa fa-check"></i><b>4.3</b> A simple <code>for</code> loop for webmap display</a></li>
<li class="chapter" data-level="4.4" data-path="embedding-leaflet-map-to-an-external-website.html"><a href="embedding-leaflet-map-to-an-external-website.html#summary-3"><i class="fa fa-check"></i><b>4.4</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="using-geojson-in-leaflet.html"><a href="using-geojson-in-leaflet.html"><i class="fa fa-check"></i><b>5</b> Using GeoJSON in Leaflet</a>
<ul>
<li class="chapter" data-level="5.1" data-path="using-geojson-in-leaflet.html"><a href="using-geojson-in-leaflet.html#creating-a-.geojson-file"><i class="fa fa-check"></i><b>5.1</b> Creating a <code>.geojson</code> file</a></li>
<li class="chapter" data-level="5.2" data-path="using-geojson-in-leaflet.html"><a href="using-geojson-in-leaflet.html#what-are-.geojson-files"><i class="fa fa-check"></i><b>5.2</b> What are <code>.geojson</code> files?</a></li>
<li class="chapter" data-level="5.3" data-path="using-geojson-in-leaflet.html"><a href="using-geojson-in-leaflet.html#why-geojson"><i class="fa fa-check"></i><b>5.3</b> Why <code>geojson</code>?</a></li>
<li class="chapter" data-level="5.4" data-path="using-geojson-in-leaflet.html"><a href="using-geojson-in-leaflet.html#creating-a-geojson-file"><i class="fa fa-check"></i><b>5.4</b> Creating a geojson file</a></li>
<li class="chapter" data-level="5.5" data-path="using-geojson-in-leaflet.html"><a href="using-geojson-in-leaflet.html#saving-the-geojson-to-github"><i class="fa fa-check"></i><b>5.5</b> Saving the Geojson to Github</a></li>
<li class="chapter" data-level="5.6" data-path="using-geojson-in-leaflet.html"><a href="using-geojson-in-leaflet.html#loading-the-geojson-into-leaflet"><i class="fa fa-check"></i><b>5.6</b> Loading the GeoJSON into Leaflet</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="using-geojson-in-leaflet.html"><a href="using-geojson-in-leaflet.html#the-easy-way"><i class="fa fa-check"></i><b>5.6.1</b> The easy way</a></li>
<li class="chapter" data-level="5.6.2" data-path="using-geojson-in-leaflet.html"><a href="using-geojson-in-leaflet.html#using-the-ajax-plugin"><i class="fa fa-check"></i><b>5.6.2</b> Using the Ajax Plugin</a></li>
<li class="chapter" data-level="5.6.3" data-path="using-geojson-in-leaflet.html"><a href="using-geojson-in-leaflet.html#using-fetch-api"><i class="fa fa-check"></i><b>5.6.3</b> Using Fetch API</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="using-geojson-in-leaflet.html"><a href="using-geojson-in-leaflet.html#summary-4"><i class="fa fa-check"></i><b>5.7</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="create-your-own-custom-markers.html"><a href="create-your-own-custom-markers.html"><i class="fa fa-check"></i><b>6</b> Create your own custom markers</a>
<ul>
<li class="chapter" data-level="6.1" data-path="create-your-own-custom-markers.html"><a href="create-your-own-custom-markers.html#setting-the-base"><i class="fa fa-check"></i><b>6.1</b> Setting the base</a></li>
<li class="chapter" data-level="6.2" data-path="create-your-own-custom-markers.html"><a href="create-your-own-custom-markers.html#the-icons"><i class="fa fa-check"></i><b>6.2</b> The icons</a></li>
<li class="chapter" data-level="6.3" data-path="create-your-own-custom-markers.html"><a href="create-your-own-custom-markers.html#differentiate-custom-markers-on-a-webmap"><i class="fa fa-check"></i><b>6.3</b> Differentiate custom markers on a webmap</a></li>
<li class="chapter" data-level="6.4" data-path="create-your-own-custom-markers.html"><a href="create-your-own-custom-markers.html#using-fetch"><i class="fa fa-check"></i><b>6.4</b> Using fetch</a></li>
<li class="chapter" data-level="6.5" data-path="create-your-own-custom-markers.html"><a href="create-your-own-custom-markers.html#unique-custom-markers"><i class="fa fa-check"></i><b>6.5</b> Unique custom markers</a></li>
<li class="chapter" data-level="6.6" data-path="create-your-own-custom-markers.html"><a href="create-your-own-custom-markers.html#image-overlays"><i class="fa fa-check"></i><b>6.6</b> Image overlays</a></li>
<li class="chapter" data-level="6.7" data-path="create-your-own-custom-markers.html"><a href="create-your-own-custom-markers.html#summary-5"><i class="fa fa-check"></i><b>6.7</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="creating-an-interactive-choropleth-map.html"><a href="creating-an-interactive-choropleth-map.html"><i class="fa fa-check"></i><b>7</b> Creating an interactive choropleth map</a>
<ul>
<li class="chapter" data-level="7.1" data-path="creating-an-interactive-choropleth-map.html"><a href="creating-an-interactive-choropleth-map.html#what-is-a-choropleth-map"><i class="fa fa-check"></i><b>7.1</b> What is a choropleth map?</a></li>
<li class="chapter" data-level="7.2" data-path="creating-an-interactive-choropleth-map.html"><a href="creating-an-interactive-choropleth-map.html#creating-a-choropleth-map-the-start"><i class="fa fa-check"></i><b>7.2</b> Creating a choropleth map: the start</a></li>
<li class="chapter" data-level="7.3" data-path="creating-an-interactive-choropleth-map.html"><a href="creating-an-interactive-choropleth-map.html#coloring-the-counties"><i class="fa fa-check"></i><b>7.3</b> Coloring the counties</a></li>
<li class="chapter" data-level="7.4" data-path="creating-an-interactive-choropleth-map.html"><a href="creating-an-interactive-choropleth-map.html#highlight-features"><i class="fa fa-check"></i><b>7.4</b> Highlight features</a></li>
<li class="chapter" data-level="7.5" data-path="creating-an-interactive-choropleth-map.html"><a href="creating-an-interactive-choropleth-map.html#creating-a-custom-info"><i class="fa fa-check"></i><b>7.5</b> Creating a custom info</a></li>
<li class="chapter" data-level="7.6" data-path="creating-an-interactive-choropleth-map.html"><a href="creating-an-interactive-choropleth-map.html#create-a-legend"><i class="fa fa-check"></i><b>7.6</b> Create a legend</a></li>
<li class="chapter" data-level="7.7" data-path="creating-an-interactive-choropleth-map.html"><a href="creating-an-interactive-choropleth-map.html#summary-6"><i class="fa fa-check"></i><b>7.7</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="layer-groups-and-controls.html"><a href="layer-groups-and-controls.html"><i class="fa fa-check"></i><b>8</b> Layer groups and controls</a>
<ul>
<li class="chapter" data-level="8.1" data-path="layer-groups-and-controls.html"><a href="layer-groups-and-controls.html#purpose-of-layer-groups-and-controls"><i class="fa fa-check"></i><b>8.1</b> Purpose of layer groups and controls</a></li>
<li class="chapter" data-level="8.2" data-path="layer-groups-and-controls.html"><a href="layer-groups-and-controls.html#set-up-the-basemaps"><i class="fa fa-check"></i><b>8.2</b> Set up the basemaps</a></li>
<li class="chapter" data-level="8.3" data-path="layer-groups-and-controls.html"><a href="layer-groups-and-controls.html#creating-the-controls"><i class="fa fa-check"></i><b>8.3</b> Creating the controls</a></li>
<li class="chapter" data-level="8.4" data-path="layer-groups-and-controls.html"><a href="layer-groups-and-controls.html#adding-overlay-maps"><i class="fa fa-check"></i><b>8.4</b> Adding overlay maps</a></li>
<li class="chapter" data-level="8.5" data-path="layer-groups-and-controls.html"><a href="layer-groups-and-controls.html#add-a-scale-bar"><i class="fa fa-check"></i><b>8.5</b> Add a scale bar</a></li>
<li class="chapter" data-level="8.6" data-path="layer-groups-and-controls.html"><a href="layer-groups-and-controls.html#summary-7"><i class="fa fa-check"></i><b>8.6</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="heatmaps.html"><a href="heatmaps.html"><i class="fa fa-check"></i><b>9</b> Heatmaps</a>
<ul>
<li class="chapter" data-level="9.1" data-path="heatmaps.html"><a href="heatmaps.html#what-are-heatmaps"><i class="fa fa-check"></i><b>9.1</b> What are heatmaps?</a></li>
<li class="chapter" data-level="9.2" data-path="heatmaps.html"><a href="heatmaps.html#loading-the-heatmap-plugin"><i class="fa fa-check"></i><b>9.2</b> Loading the heatmap plugin</a></li>
<li class="chapter" data-level="9.3" data-path="heatmaps.html"><a href="heatmaps.html#creating-the-leaflet-heatmap"><i class="fa fa-check"></i><b>9.3</b> Creating the Leaflet heatmap</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="cluster-to-reduce-the-clutter.html"><a href="cluster-to-reduce-the-clutter.html"><i class="fa fa-check"></i><b>10</b> Cluster to reduce the clutter</a>
<ul>
<li class="chapter" data-level="10.1" data-path="cluster-to-reduce-the-clutter.html"><a href="cluster-to-reduce-the-clutter.html#a-map-full-of-clutter"><i class="fa fa-check"></i><b>10.1</b> A map full of clutter</a></li>
<li class="chapter" data-level="10.2" data-path="cluster-to-reduce-the-clutter.html"><a href="cluster-to-reduce-the-clutter.html#preparations"><i class="fa fa-check"></i><b>10.2</b> Preparations</a></li>
<li class="chapter" data-level="10.3" data-path="cluster-to-reduce-the-clutter.html"><a href="cluster-to-reduce-the-clutter.html#behold-a-cluster-marker-map"><i class="fa fa-check"></i><b>10.3</b> Behold, a cluster marker map!</a></li>
<li class="chapter" data-level="10.4" data-path="cluster-to-reduce-the-clutter.html"><a href="cluster-to-reduce-the-clutter.html#additional-features-of-cluster-marker-plugin"><i class="fa fa-check"></i><b>10.4</b> Additional features of Cluster marker plugin</a></li>
<li class="chapter" data-level="10.5" data-path="cluster-to-reduce-the-clutter.html"><a href="cluster-to-reduce-the-clutter.html#summary-8"><i class="fa fa-check"></i><b>10.5</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="mobile-friendly-webapps.html"><a href="mobile-friendly-webapps.html"><i class="fa fa-check"></i><b>11</b> Mobile Friendly Webapps</a>
<ul>
<li class="chapter" data-level="11.1" data-path="mobile-friendly-webapps.html"><a href="mobile-friendly-webapps.html#the-need-for-mobile-friendly-web-apps"><i class="fa fa-check"></i><b>11.1</b> The need for mobile friendly web apps</a></li>
<li class="chapter" data-level="11.2" data-path="mobile-friendly-webapps.html"><a href="mobile-friendly-webapps.html#the-basemaps"><i class="fa fa-check"></i><b>11.2</b> The basemaps</a></li>
<li class="chapter" data-level="11.3" data-path="mobile-friendly-webapps.html"><a href="mobile-friendly-webapps.html#adding-the-features"><i class="fa fa-check"></i><b>11.3</b> Adding the features</a></li>
<li class="chapter" data-level="11.4" data-path="mobile-friendly-webapps.html"><a href="mobile-friendly-webapps.html#zooming-to-mobile-users-location"><i class="fa fa-check"></i><b>11.4</b> Zooming to mobile user’s location</a></li>
<li class="chapter" data-level="11.5" data-path="mobile-friendly-webapps.html"><a href="mobile-friendly-webapps.html#add-marker-to-mobile-users-geolocation"><i class="fa fa-check"></i><b>11.5</b> Add marker to mobile user’s geolocation</a></li>
<li class="chapter" data-level="11.6" data-path="mobile-friendly-webapps.html"><a href="mobile-friendly-webapps.html#the-mobile-webmap-app-in-action"><i class="fa fa-check"></i><b>11.6</b> The mobile webmap app in action!</a></li>
<li class="chapter" data-level="11.7" data-path="mobile-friendly-webapps.html"><a href="mobile-friendly-webapps.html#summary-9"><i class="fa fa-check"></i><b>11.7</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="web-map-service-layers.html"><a href="web-map-service-layers.html"><i class="fa fa-check"></i><b>12</b> Web Map Service Layers</a>
<ul>
<li class="chapter" data-level="12.1" data-path="web-map-service-layers.html"><a href="web-map-service-layers.html#what-are-web-map-service-wms-layers"><i class="fa fa-check"></i><b>12.1</b> What are Web Map Service (WMS) Layers?</a></li>
<li class="chapter" data-level="12.2" data-path="web-map-service-layers.html"><a href="web-map-service-layers.html#loading-a-wms-server"><i class="fa fa-check"></i><b>12.2</b> Loading a WMS server</a></li>
<li class="chapter" data-level="12.3" data-path="web-map-service-layers.html"><a href="web-map-service-layers.html#adding-wms-to-layer-control"><i class="fa fa-check"></i><b>12.3</b> Adding WMS to layer control</a></li>
<li class="chapter" data-level="12.4" data-path="web-map-service-layers.html"><a href="web-map-service-layers.html#summary-10"><i class="fa fa-check"></i><b>12.4</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="standard-website-with-leaflet-project.html"><a href="standard-website-with-leaflet-project.html"><i class="fa fa-check"></i><b>13</b> Standard Website with Leaflet Project</a>
<ul>
<li class="chapter" data-level="13.1" data-path="standard-website-with-leaflet-project.html"><a href="standard-website-with-leaflet-project.html#get-the-html-template"><i class="fa fa-check"></i><b>13.1</b> Get the HTML Template</a></li>
<li class="chapter" data-level="13.2" data-path="standard-website-with-leaflet-project.html"><a href="standard-website-with-leaflet-project.html#embed-leaflet-to-standard-html-website"><i class="fa fa-check"></i><b>13.2</b> Embed Leaflet to standard html website</a></li>
<li class="chapter" data-level="13.3" data-path="standard-website-with-leaflet-project.html"><a href="standard-website-with-leaflet-project.html#editing-the-css"><i class="fa fa-check"></i><b>13.3</b> Editing the CSS</a></li>
<li class="chapter" data-level="13.4" data-path="standard-website-with-leaflet-project.html"><a href="standard-website-with-leaflet-project.html#embedding-leaflet-to-every-webpage"><i class="fa fa-check"></i><b>13.4</b> Embedding Leaflet to every webpage</a></li>
<li class="chapter" data-level="13.5" data-path="standard-website-with-leaflet-project.html"><a href="standard-website-with-leaflet-project.html#posting-the-html-website-to-the-world"><i class="fa fa-check"></i><b>13.5</b> Posting the Html website to the world</a></li>
<li class="chapter" data-level="13.6" data-path="standard-website-with-leaflet-project.html"><a href="standard-website-with-leaflet-project.html#summary-11"><i class="fa fa-check"></i><b>13.6</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="esri-and-leaflet.html"><a href="esri-and-leaflet.html"><i class="fa fa-check"></i><b>14</b> ESRI and Leaflet</a>
<ul>
<li class="chapter" data-level="14.1" data-path="esri-and-leaflet.html"><a href="esri-and-leaflet.html#an-overview-of-esri"><i class="fa fa-check"></i><b>14.1</b> An overview of ESRI</a></li>
<li class="chapter" data-level="14.2" data-path="esri-and-leaflet.html"><a href="esri-and-leaflet.html#esri-leaflet-plugins"><i class="fa fa-check"></i><b>14.2</b> ESRI Leaflet plugins</a></li>
<li class="chapter" data-level="14.3" data-path="esri-and-leaflet.html"><a href="esri-and-leaflet.html#creating-an-esri-leaflet-map"><i class="fa fa-check"></i><b>14.3</b> Creating an ESRI Leaflet map</a></li>
<li class="chapter" data-level="14.4" data-path="esri-and-leaflet.html"><a href="esri-and-leaflet.html#geocode-search"><i class="fa fa-check"></i><b>14.4</b> Geocode search</a></li>
<li class="chapter" data-level="14.5" data-path="esri-and-leaflet.html"><a href="esri-and-leaflet.html#add-search-bar"><i class="fa fa-check"></i><b>14.5</b> Add search bar</a></li>
<li class="chapter" data-level="14.6" data-path="esri-and-leaflet.html"><a href="esri-and-leaflet.html#make-the-search-bar-functional"><i class="fa fa-check"></i><b>14.6</b> Make the search bar functional</a></li>
<li class="chapter" data-level="14.7" data-path="esri-and-leaflet.html"><a href="esri-and-leaflet.html#adding-an-auto-generated-location-pin"><i class="fa fa-check"></i><b>14.7</b> Adding an auto-generated location pin</a></li>
<li class="chapter" data-level="14.8" data-path="esri-and-leaflet.html"><a href="esri-and-leaflet.html#summary-12"><i class="fa fa-check"></i><b>14.8</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>15</b> Conclusion</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Leaflet in Practice: Create webmaps using the JavaScript Leaflet library</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="create-your-own-custom-markers" class="section level1 hasAnchor" number="6">
<h1><span class="header-section-number">Chapter 6</span> Create your own custom markers<a href="create-your-own-custom-markers.html#create-your-own-custom-markers" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="setting-the-base" class="section level2 hasAnchor" number="6.1">
<h2><span class="header-section-number">6.1</span> Setting the base<a href="create-your-own-custom-markers.html#setting-the-base" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Hope you didn’t trash away the cities we created in the last <a href="using-geojson-in-leaflet.html#using-geojson-in-leaflet">chapter</a>. In this chapter, we shall focus on creating your own custom markers. We love a clean job, so we will create a new JavaScript file and name it <code>custom-markers.js</code>. We understand the previous <a href="using-geojson-in-leaflet.html#using-geojson-in-leaflet">chapter</a> was quite long but believe you me, although creating custom markers sounds easier, it took us way longer to get the hang around it. Good news, we received enough punches on the face to teach you how to dodge the pain points.</p>
<p>The very first thing to do is to create a basemap.</p>
<pre><code>var map = L.map(&#39;myMap&#39;).setView([-1.295287148, 36.81984753], 7);

L.tileLayer(&#39;https://tile.openstreetmap.org/{z}/{x}/{y}.png&#39;, {
    maxZoom: 19,
    attribution: &#39;&amp;copy; &lt;a href=&quot;http://www.openstreetmap.org/copyright&quot;&gt;OpenStreetMap&lt;/a&gt;&#39;
}).addTo(map);</code></pre>
<p>We will create a new variable called <code>cities</code> that mimics the GeoJson file saved to Github only this time round the population values have been tweaked a bit. Paste the below code to your <code>custom-markers.js</code>.</p>
<pre><code>var cities = {
    &quot;type&quot;: &quot;FeatureCollection&quot;,
    &quot;features&quot;: [
      {
        &quot;type&quot;: &quot;Feature&quot;,
        &quot;properties&quot;: {
          &quot;City&quot;: &quot;Nairobi&quot;,
          &quot;Population&quot;: 4300000
        },
        &quot;geometry&quot;: {
          &quot;coordinates&quot;: [
            36.8198475311531,
            -1.2952871483350066
          ],
          &quot;type&quot;: &quot;Point&quot;
        }
      },
      {
        &quot;type&quot;: &quot;Feature&quot;,
        &quot;properties&quot;: {
          &quot;City&quot;: &quot;Kisumu&quot;,
          &quot;Population&quot;: 610082
        },
        &quot;geometry&quot;: {
          &quot;coordinates&quot;: [
            34.74657469430895,
            -0.10402992528247523
          ],
          &quot;type&quot;: &quot;Point&quot;
        }
      },
      {
        &quot;type&quot;: &quot;Feature&quot;,
        &quot;properties&quot;: {
          &quot;City&quot;: &quot;Mombasa&quot;,
          &quot;Population&quot;: 1440000
        },
        &quot;geometry&quot;: {
          &quot;coordinates&quot;: [
            39.66358575335434,
            -4.041883912902392
          ],
          &quot;type&quot;: &quot;Point&quot;
        }
      },
      {
        &quot;type&quot;: &quot;Feature&quot;,
        &quot;properties&quot;: {
          &quot;City&quot;: &quot;Nakuru&quot;,
          &quot;Population&quot;: 422000
        },
        &quot;geometry&quot;: {
          &quot;coordinates&quot;: [
            36.06412271026528,
            -0.2754534004690896
          ],
          &quot;type&quot;: &quot;Point&quot;
        }
      },
      {
        &quot;type&quot;: &quot;Feature&quot;,
        &quot;properties&quot;: {
          &quot;City&quot;: &quot;Nyeri&quot;,
          &quot;Population&quot;: 759164
        },
        &quot;geometry&quot;: {
          &quot;coordinates&quot;: [
            36.957036675396154,
            -0.42345404217887506
          ],
          &quot;type&quot;: &quot;Point&quot;
        }
      },
      {
        &quot;type&quot;: &quot;Feature&quot;,
        &quot;properties&quot;: {
          &quot;City&quot;: &quot;Machakos&quot;,
          &quot;Population&quot;: 1422000
        },
        &quot;geometry&quot;: {
          &quot;coordinates&quot;: [
            37.25780808801821,
            -1.518874011494134
          ],
          &quot;type&quot;: &quot;Point&quot;
        }
      },
      {
        &quot;type&quot;: &quot;Feature&quot;,
        &quot;properties&quot;: {
          &quot;City&quot;: &quot;Malindi&quot;,
          &quot;Population&quot;: 119859
        },
        &quot;geometry&quot;: {
          &quot;coordinates&quot;: [
            40.10521499751357,
            -3.2138767356491655
          ],
          &quot;type&quot;: &quot;Point&quot;
        }
      }
    ]
  }
</code></pre>
<p>Can you notice any difference on the <code>Population</code> property compared to the code in <a href="using-geojson-in-leaflet.html#using-geojson-in-leaflet">Chapter 5</a>? If you are hawkeyed, you will notice that the <strong>Population</strong> values this time round are integers compared to the string values used in the previous chapter. It sounds superflous to create population values as strings only to convert them to integers now, but please do remember the geojson.io site did that for us, not this author. Here is the <a href="https://raw.githubusercontent.com/sammigachuhi/geojson_files/main/cities-geojson2.geojson.txt">raw geojson script</a> customized for this chapter. It is also available <a href="https://raw.githubusercontent.com/sammigachuhi/my-leaflet-project/main/geojson_files_updated/cities-geojson2.geojson.txt">here</a>.</p>
<p>Just a small note before going on. When the GeoJSON file has the population values enclosed in strings <code>""</code>, they are automatically rendered on a map on the Github server as shown below.</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="create-your-own-custom-markers.html#cb67-1" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="fu">rep</span>(<span class="st">&quot;D:/gachuhi/my-leaflet/images/geojson-webmap.jpg&quot;</span>))</span></code></pre></div>
<p><img src="../images/geojson-webmap.jpg" /><!-- --></p>
<p>However, when the strings are removed, and the population values remain as integers, they are no longer rendered on a webmap as shown below.</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="create-your-own-custom-markers.html#cb68-1" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="fu">rep</span>(<span class="st">&quot;D:/gachuhi/my-leaflet/images/geojson-nowebmap.jpg&quot;</span>))</span></code></pre></div>
<p><img src="../images/geojson-nowebmap.jpg" /><!-- --></p>
<p>No map rendered, just a dictionary containing other dictionaries.</p>
</div>
<div id="the-icons" class="section level2 hasAnchor" number="6.2">
<h2><span class="header-section-number">6.2</span> The icons<a href="create-your-own-custom-markers.html#the-icons" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Alright. Let’s create a map of our cities but with custom markers this time round. The below code creates our custom markers.</p>
<pre><code>// Yellow Icon
var yellowIcon = new L.Icon({
    iconUrl: &#39;https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-yellow.png&#39;,
    shadowUrl: &#39;https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png&#39;,
    iconSize: [25, 41],
    iconAnchor: [12, 41],
    popupAnchor: [1, -34],
    shadowSize: [41, 41]
  });

// Orange Icon
var orangeIcon = new L.Icon({
    iconUrl: &#39;https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-orange.png&#39;,
    shadowUrl: &#39;https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png&#39;,
    iconSize: [25, 41],
    iconAnchor: [12, 41],
    popupAnchor: [1, -34],
    shadowSize: [41, 41]
  });

// Red Icon
var redIcon = new L.Icon({
    iconUrl: &#39;https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png&#39;,
    shadowUrl: &#39;https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png&#39;,
    iconSize: [25, 41],
    iconAnchor: [12, 41],
    popupAnchor: [1, -34],
    shadowSize: [41, 41]
  });
</code></pre>
<p>We created three markers in order of importance: yellow, orange, red. You will see the significance (not so much) of these colors later.</p>
<p>Time to create GeoJSON markers out of this.</p>
<pre><code>L.geoJSON(cities, {
    pointToLayer(feature, latlng) {
        return L.marker(latlng, {icon: yellowIcon});
    }
}).bindPopup(function (layer) {
    return layer.feature.properties.City;
}).addTo(map);
</code></pre>
<p>We got this.</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="create-your-own-custom-markers.html#cb71-1" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="fu">rep</span>(<span class="st">&quot;D:/gachuhi/my-leaflet/images/geojson-markers.jpg&quot;</span>))</span></code></pre></div>
<p><img src="../images/geojson-markers.jpg" /><!-- --></p>
<p>All cities are marked yellow irrespective of their population or jurisdictional significance. From a cartographer’s perspective, the webmap needs more styling but before we get there, what was the purpose of the <code>pointToLayer()</code> function? According to the Leaflet guide, the <code>pointToLayer()</code> function is a special function for GeoJSON variables that specifies how they should be drawn. To be more descriptive, the function parses the <code>return L.marker...</code> function to every Lat-Lon coordinate to make a marker appear at that point.</p>
</div>
<div id="differentiate-custom-markers-on-a-webmap" class="section level2 hasAnchor" number="6.3">
<h2><span class="header-section-number">6.3</span> Differentiate custom markers on a webmap<a href="create-your-own-custom-markers.html#differentiate-custom-markers-on-a-webmap" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Now to the city markers. We would appreciate if the markers would differentiate the cities based on a particular variable, say population. By the way, size of cities is generally determined by population. The below code shall categorize cities by the size of circle markers which shall be based on the city’s population. If you’ve seen point symbols in Qgis, get ready to see them in action in Leaflet!</p>
<p>Comment out the earlier code and insert this:</p>
<pre><code>L.geoJSON(cities, {
  pointToLayer: function (feature, latlng) {
    if (feature.properties.Population &lt;= 250000) {
      return L.circleMarker(latlng, {
        radius: 4,
        fillColor: &#39;#FFFF00&#39;,
        color: &#39;#000&#39;,
        weight: 1,
        opacity: 1,
        fillOpacity: 0.8  
      });
    } else if (feature.properties.Population &lt;= 800000) {
      return L.circleMarker(latlng, {
        radius: 8,
        fillColor: &#39;#ff9900&#39;,
        color: &#39;#000&#39;,
        weight: 1,
        opacity: 1,
        fillOpacity: 0.8  
      });
    } else {
      return L.circleMarker(latlng, {
        radius: 12,
        fillColor: &#39;#FF0000&#39;,
        color: &#39;#000&#39;,
        weight: 1,
        opacity: 1,
        fillOpacity: 0.8  
      });
    }
    
  }
}).bindPopup(function (layer) {
  return `City: ${layer.feature.properties.City},&lt;br&gt;
  Population: ${layer.feature.properties.Population}`;
}).addTo(map);
</code></pre>
<p>What you get is a map where the size of the circle markers has been defined by the city’s population. This time round, the <code>pointToLayer()</code> function body worked with <strong>if/else if</strong> statement to differentiate the radius and color of each circle marker. Under the <strong>if/else if</strong> code statement block, different circle marker specifications of radius and fillColor were inserted for each population category. Any city with a population beyond 800000 was fitted into the <code>else</code> block.</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="create-your-own-custom-markers.html#cb73-1" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="fu">rep</span>(<span class="st">&quot;D:/gachuhi/my-leaflet/images/geojson-diff1.jpg&quot;</span>))</span></code></pre></div>
<p><img src="../images/geojson-diff1.jpg" /><!-- --></p>
<p>This brings us to why we changed the population values from strings to integers. If we were to work with the original string values (like “1000000” in quotes), any value beyond 1, 000, 000 would receive the settings of <code>feature.properties.Population &lt;= 250000</code>. That is, it would be displayed in the same color scheme of yellow as a city with a population say, 25, 000 people and below. That would be passing a wrong message. The explanation for this glaring error arising from use of string values is this: when ordering numbers enclosed in strings in JavaScript, they will be ordered by their first character irrespective of the size of the value. In other words, 1 is greater than 9 even though the latter is more. Thus a city of <strong>“<strong>800, 000</strong>”</strong> people will be treated as bigger than a city of <strong>“<strong>1, 000, 000</strong>”</strong>. Now you see the logic of working without the quotes around the <strong>Population</strong> variable, as is the case with our GeoJSON file.</p>
<p>In the next code sample, we shall create city marker icons whose colors shall be determined by the size of the city’s population. We will work with three colors: yellow, orange and red. Yellow shall mark the smallest city while red shall indicate the largest. The below code shows how this categorization is worked out.</p>
<pre><code>L.geoJSON(cities, {
  pointToLayer: function (feature, latlng) {
    if (feature.properties.Population &lt;= 250000) {
      return L.marker(latlng, {
        icon: yellowIcon 
      });
    } else if (feature.properties.Population &lt;= 800000) {
      return L.marker(latlng, {
        icon: orangeIcon 
      });
    } else {
      return L.marker(latlng, {
        icon: redIcon 
      });
    }
    
  }
}).bindPopup(function (layer) {
  return `City: ${layer.feature.properties.City},&lt;br&gt;
  Population: ${layer.feature.properties.Population}`;
}).addTo(map);</code></pre>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="create-your-own-custom-markers.html#cb75-1" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="fu">rep</span>(<span class="st">&quot;D:/gachuhi/my-leaflet/images/geojson-diff2.jpg&quot;</span>))</span></code></pre></div>
<p><img src="../images/geojson-diff2.jpg" /><!-- --></p>
<p>In the above map, large cities with populations above 800, 000 have been categorized with a red marker, those with populations below 250, 000 with a yellow marker and those in between with an orange marker. In all cases, our <code>bindPopup()</code> still contains the same settings of showing both the city name and population size.</p>
<p>The value to the <code>pointToLayer()</code> key was assigned a function that checks if a city’s population is within a specific range. If a city falls within the range specified by the <code>if</code> statement, a particular icon –whether <code>yellowIcon</code>, <code>orangeIcon</code> or <code>redIcon</code> is returned by the <code>L.marker()</code> function.</p>
</div>
<div id="using-fetch" class="section level2 hasAnchor" number="6.4">
<h2><span class="header-section-number">6.4</span> Using fetch<a href="create-your-own-custom-markers.html#using-fetch" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Remember how <code>fetch</code> helped us retrieve data from a server in a previous chapter? Whereas we won’t repeat the entire process again (you can breathe a sigh of relief), the same iterations of differentiating a marker icon can also be inserted into the <code>fetch</code> API. All this is done right within the options of <code>L.geoJson(data, {options})</code>.</p>
<pre><code>fetch(&quot;https://raw.githubusercontent.com/sammigachuhi/geojson_files/main/cities-geojson2.geojson.txt&quot;)
    .then((response) =&gt;{
        return response.json()
    })
    .then((data) =&gt; {
        L.geoJson(data, {
          pointToLayer: function (feature, latlng) {
            if (feature.properties.Population &lt;= 250000) {
              return L.marker(latlng, {
                icon: yellowIcon 
              });
            } else if (feature.properties.Population &lt;= 800000) {
              return L.marker(latlng, {
                icon: orangeIcon 
              });
            } else {
              return L.marker(latlng, {
                icon: redIcon 
              });
            }
            
          }
        }).bindPopup((layer) =&gt; {
            return `City: ${layer.feature.properties.City},&lt;br&gt;
            Population: ${layer.feature.properties.Population}`}).addTo(map);
    })
    .catch((error) =&gt; {
        console.log(`This is the error: ${error}`)
    })
</code></pre>
<p>The resulting map should look like the previous one.</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="create-your-own-custom-markers.html#cb77-1" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="fu">rep</span>(<span class="st">&quot;D:/gachuhi/my-leaflet/images/cities_colored.jpg&quot;</span>))</span></code></pre></div>
<p><img src="../images/cities_colored.jpg" /><!-- --></p>
</div>
<div id="unique-custom-markers" class="section level2 hasAnchor" number="6.5">
<h2><span class="header-section-number">6.5</span> Unique custom markers<a href="create-your-own-custom-markers.html#unique-custom-markers" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>This part may not be necessary, but it has been inserted to show you that there are various markers apart from the defaults provided by Leaflet. One can create custom markers outside of Leaflet using the <a href="https://github.com/lennardv2/Leaflet.awesome-markers">Leaflet.Awesome.Markers plugin</a>. Just like in the case of Ajax, you will need to provide the path to the plugin’s dependencies using the <code>&lt;script&gt;</code> tag. Insert the following <code>&lt;script&gt;</code> tags into <code>map.html</code>.</p>
<pre><code>&lt;script src=&quot;Leaflet.awesome-markers-2.0-develop\Leaflet.awesome-markers-2.0-develop\dist\leaflet.awesome-markers.js&quot;&gt;&lt;/script&gt;

&lt;script src=&quot;Leaflet.awesome-markers-2.0-develop\Leaflet.awesome-markers-2.0-develop\dist\leaflet.awesome-markers.css&quot;&gt;&lt;/script&gt;
</code></pre>
<p>And also this <code>&lt;link&gt;</code> tag:</p>
<pre><code>&lt;link href=&quot;http://netdna.bootstrapcdn.com/font-awesome/4.0.0/css/font-awesome.css&quot; rel=&quot;stylesheet&quot;&gt; 
</code></pre>
<p>To make the best use of time, following the example on their site, we simply replace the value of our <code>icon</code> keys with the new <code>L.AwesomeMarkers.icon</code>. We also tweaked the colors for each icon to match those used previously. Because these markers signify various amenities, we made some overly simplified assumptions for the sake of demonstrating their use ie. big cities with a population above 1, 000, 000 have the best malls, those with a population between 250, 000 and 800, 000 must be having good coffee places, and those with populations below 250, 000 obviously have respectable industries. We assume fair play has been exercised in our assumptions. So here is the code.</p>
<pre><code>L.geoJSON(cities, {
    pointToLayer: function (feature, latlng) {
      if (feature.properties.Population &lt;= 250000) {
        return L.marker(latlng, {
          icon: L.AwesomeMarkers.icon({icon: &#39;cog&#39;, prefix: &#39;fa&#39;, markerColor: &#39;purple&#39;, iconColor: &#39;yellow&#39;}) 
        });
      } else if (feature.properties.Population &lt;= 800000) {
        return L.marker(latlng, {
          icon: L.AwesomeMarkers.icon({icon: &#39;coffee&#39;, prefix: &#39;fa&#39;, markerColor: &#39;red&#39;, iconColor: &#39;orange&#39;}) 
        });
      } else {
        return L.marker(latlng, {
          icon: L.AwesomeMarkers.icon({icon: &#39;shopping-cart&#39;, prefix: &#39;fa&#39;, markerColor: &#39;blue&#39;, iconColor: &#39;red&#39;})
        });
      }
      
    }
  }).bindPopup(function (layer) {
    return `City: ${layer.feature.properties.City},&lt;br&gt;
    Population: ${layer.feature.properties.Population}`;
  }).addTo(map);
</code></pre>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="create-your-own-custom-markers.html#cb81-1" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="fu">rep</span>(<span class="st">&quot;D:/gachuhi/my-leaflet/images/extra-markers.jpg&quot;</span>))</span></code></pre></div>
<p><img src="../images/extra-markers.jpg" /><!-- --></p>
<p>The custom markers are also clickable!</p>
</div>
<div id="image-overlays" class="section level2 hasAnchor" number="6.6">
<h2><span class="header-section-number">6.6</span> Image overlays<a href="create-your-own-custom-markers.html#image-overlays" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Sometimes an image can act as good a marker. Overlaying images on a map is fairly easy. The below code inserts an image above a historical monument located in the Kenyan capital, Nairobi.</p>
<pre><code>// Image overlays
var imageUrl = &#39;https://pbs.twimg.com/media/DddQBk5WsAAlbdJ?format=jpg&amp;name=large&#39;;
var errorOverlayUrl = &#39;https://pbs.twimg.com/media/DddQBk5WsAAlbdJ?format=jpg&amp;name=large&#39;;
var altText = &#39;The Galton - Fenzi Memorial: Source: Google and Twitter&#39;;
var latLngBounds = L.latLngBounds([[-1.2861259,36.8172709], [-1.2886193,36.8230413]]);

var imageOverlay = L.imageOverlay(imageUrl, latLngBounds, {
    opacity: 0.8,
    errorOverlayUrl: errorOverlayUrl,
    alt: altText,
    interactive: true
}).addTo(map);

</code></pre>
<p>However, finding an image of just one location over the wide earth can be laborious, so we envelope it with a rectangle. The <code>map.fitBounds</code> function enables the browser to automatically zoom to where our image is placed.</p>
<pre><code>L.rectangle(latLngBounds).addTo(map);
map.fitBounds(latLngBounds);
</code></pre>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="create-your-own-custom-markers.html#cb84-1" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="fu">rep</span>(<span class="st">&quot;D:/gachuhi/my-leaflet/images/geltan-fenzi.jpg&quot;</span>))</span></code></pre></div>
<p><img src="../images/geltan-fenzi.jpg" /><!-- --></p>
<p>Mind you that landmark was set up in 1939 in honour of Lionel Douglas Galton-Fenzi; the first motorist to drive from Nairobi to Mombasa as early as 1926. The landmark is also inscribed with bearings to various East African cities but enough history for today.</p>
<p>Anyway, here is a quick breakdown of the attributes used in <code>L.imageOverlay</code>: a) the <code>var latLngBounds</code> uses the <code>L.latLngBounds</code> class to set the lat-lon coordinates. Notice they are two coordinate lists bound with a single <code>[]</code>. Failing to enclose the two coordinates with <code>[]</code> results in an error. b) <code>var ImageUrl</code> is the image source.</p>
<p>For the additional options parsed to the <code>L.imageOverlay()</code> class, they are described below:</p>
<ol style="list-style-type: decimal">
<li><p><code>opacity</code> - defines the opacity of the image overlay, it equals to 1.0 by default. Decrease this value to make an image overlay transparent and to expose the underlying map layer.</p></li>
<li><p><code>errorOverlayUrl</code> - is a URL to the overlay image to show in place of the overlay that failed to load.</p></li>
<li><p><code>alt</code> - sets the HTML alt attribute to provide an alternative text description of the image. It is quite helpful in describing an image in text form just in case it fails to load due to poor network connectivity. Moreover, it can improve the Search Engine Optimization (SEO) of the website it is hosted in.</p></li>
<li><p><code>interactive</code> - is false by default. If true, the image overlay will emit mouse events when clicked or hovered.</p></li>
</ol>
<p>Full codes and files are <a href="https://github.com/sammigachuhi/my-leaflet-project/tree/main/my-leaflet-code/chapter-6-custom-markers">here</a>.</p>
</div>
<div id="summary-5" class="section level2 hasAnchor" number="6.7">
<h2><span class="header-section-number">6.7</span> Summary<a href="create-your-own-custom-markers.html#summary-5" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>This was quite a long chapter that rendered justice on how to customize GeoJSON markers in Leaflet. Through the various exercises you encountered in this chapter, you have learnt the following:</p>
<ul>
<li><p>GeoJSON files, if in the correct format, can be rendered as a standalone map from Github. An example is <a href="https://github.com/sammigachuhi/geojson_files/blob/main/cities-geojson.geojson">here</a>.</p></li>
<li><p>One can customize marker colour or size based on the GeoJSON’s file attributes. In this chapter, the city population values were used to define the marker’s size and colour.</p></li>
<li><p>The <code>pointToLayer</code> key, when used as an option in <code>L.geoJSON</code>, will parse a particular function to every Lat-Lon coordinate of the GeoJSON object.</p></li>
<li><p>It is also possible to customize markers in the <code>fetch</code> API by simply specifying how they should appear, in form of functions, within the <code>L.geoJson</code> options environment.</p></li>
<li><p>There exist plenty of custom made icons outside of, but compatible with Leaflet. An example of such a library is <a href="https://github.com/lennardv2/Leaflet.awesome-markers">Leaflet Awesome Markers</a>.</p></li>
<li><p>Images can also be overlayed on a Leaflet map. This was done in the sub-chapter of <a href="create-your-own-custom-markers.html#image-overlays">Image Overlays</a>.</p></li>
</ul>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="using-geojson-in-leaflet.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="creating-an-interactive-choropleth-map.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/06-Custom_markers.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
