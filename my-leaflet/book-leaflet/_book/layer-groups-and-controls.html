<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 8 Layer groups and controls | Leaflet book</title>
  <meta name="description" content="<p>This is a minimal example of using the bookdown package to write a book.
The HTML output format for this example is bookdown::gitbook,
set in the _output.yml file.</p>" />
  <meta name="generator" content="bookdown 0.33 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 8 Layer groups and controls | Leaflet book" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="<p>This is a minimal example of using the bookdown package to write a book.
The HTML output format for this example is bookdown::gitbook,
set in the _output.yml file.</p>" />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 8 Layer groups and controls | Leaflet book" />
  
  <meta name="twitter:description" content="<p>This is a minimal example of using the bookdown package to write a book.
The HTML output format for this example is bookdown::gitbook,
set in the _output.yml file.</p>" />
  

<meta name="author" content="Samuel Gachuhi Ngugi" />


<meta name="date" content="2023-07-04" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="creating-an-interactive-choropleth-map.html"/>
<link rel="next" href="heatmaps.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>About</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#usage"><i class="fa fa-check"></i>Usage</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#render-book"><i class="fa fa-check"></i>Render book</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#preview-book"><i class="fa fa-check"></i>Preview book</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#what-is-leaflet"><i class="fa fa-check"></i><b>1.1</b> What is Leaflet?</a></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#how-does-it-work"><i class="fa fa-check"></i><b>1.2</b> How does it work?</a></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#javascript"><i class="fa fa-check"></i><b>1.3</b> JavaScript</a></li>
<li class="chapter" data-level="1.4" data-path="introduction.html"><a href="introduction.html#css-files"><i class="fa fa-check"></i><b>1.4</b> CSS files</a></li>
<li class="chapter" data-level="1.5" data-path="introduction.html"><a href="introduction.html#summary"><i class="fa fa-check"></i><b>1.5</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="first-leaflet-map.html"><a href="first-leaflet-map.html"><i class="fa fa-check"></i><b>2</b> First Leaflet Map</a>
<ul>
<li class="chapter" data-level="2.1" data-path="first-leaflet-map.html"><a href="first-leaflet-map.html#setting-the-superstructure"><i class="fa fa-check"></i><b>2.1</b> Setting the superstructure</a></li>
<li class="chapter" data-level="2.2" data-path="first-leaflet-map.html"><a href="first-leaflet-map.html#beautifying-the-house"><i class="fa fa-check"></i><b>2.2</b> Beautifying the house</a></li>
<li class="chapter" data-level="2.3" data-path="first-leaflet-map.html"><a href="first-leaflet-map.html#summary-1"><i class="fa fa-check"></i><b>2.3</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="add-ons.html"><a href="add-ons.html"><i class="fa fa-check"></i><b>3</b> Add ons</a>
<ul>
<li class="chapter" data-level="3.1" data-path="add-ons.html"><a href="add-ons.html#a-marker"><i class="fa fa-check"></i><b>3.1</b> A marker</a></li>
<li class="chapter" data-level="3.2" data-path="add-ons.html"><a href="add-ons.html#a-marker-with-a-popup"><i class="fa fa-check"></i><b>3.2</b> A marker with a popup</a></li>
<li class="chapter" data-level="3.3" data-path="add-ons.html"><a href="add-ons.html#different-markers-and-popups"><i class="fa fa-check"></i><b>3.3</b> Different markers and popups</a></li>
<li class="chapter" data-level="3.4" data-path="add-ons.html"><a href="add-ons.html#summary-2"><i class="fa fa-check"></i><b>3.4</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="embedding-leaflet-map-to-an-external-website.html"><a href="embedding-leaflet-map-to-an-external-website.html"><i class="fa fa-check"></i><b>4</b> Embedding leaflet map to an external website</a>
<ul>
<li class="chapter" data-level="4.1" data-path="embedding-leaflet-map-to-an-external-website.html"><a href="embedding-leaflet-map-to-an-external-website.html#a-website-with-a-sense-of-direction"><i class="fa fa-check"></i><b>4.1</b> A website with a sense of direction</a></li>
<li class="chapter" data-level="4.2" data-path="embedding-leaflet-map-to-an-external-website.html"><a href="embedding-leaflet-map-to-an-external-website.html#the-html-webpage"><i class="fa fa-check"></i><b>4.2</b> The HTML webpage</a></li>
<li class="chapter" data-level="4.3" data-path="embedding-leaflet-map-to-an-external-website.html"><a href="embedding-leaflet-map-to-an-external-website.html#the-leaflet-javascript-code-for-our-website"><i class="fa fa-check"></i><b>4.3</b> The leaflet JavaScript code for our website</a></li>
<li class="chapter" data-level="4.4" data-path="embedding-leaflet-map-to-an-external-website.html"><a href="embedding-leaflet-map-to-an-external-website.html#summary-3"><i class="fa fa-check"></i><b>4.4</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="using-geojson-in-leaflet.html"><a href="using-geojson-in-leaflet.html"><i class="fa fa-check"></i><b>5</b> Using GeoJSON in Leaflet</a>
<ul>
<li class="chapter" data-level="5.1" data-path="using-geojson-in-leaflet.html"><a href="using-geojson-in-leaflet.html#creating-a-.geojson-file"><i class="fa fa-check"></i><b>5.1</b> Creating a <code>.geojson</code> file</a></li>
<li class="chapter" data-level="5.2" data-path="using-geojson-in-leaflet.html"><a href="using-geojson-in-leaflet.html#what-are-.geojson-files"><i class="fa fa-check"></i><b>5.2</b> What are <code>.geojson</code> files?</a></li>
<li class="chapter" data-level="5.3" data-path="using-geojson-in-leaflet.html"><a href="using-geojson-in-leaflet.html#why-geojson"><i class="fa fa-check"></i><b>5.3</b> Why <code>geojson</code>?</a></li>
<li class="chapter" data-level="5.4" data-path="using-geojson-in-leaflet.html"><a href="using-geojson-in-leaflet.html#creating-a-geojson-file"><i class="fa fa-check"></i><b>5.4</b> Creating a geojson file</a></li>
<li class="chapter" data-level="5.5" data-path="using-geojson-in-leaflet.html"><a href="using-geojson-in-leaflet.html#saving-the-geojson-to-github"><i class="fa fa-check"></i><b>5.5</b> Saving the Geojson to Github</a></li>
<li class="chapter" data-level="5.6" data-path="using-geojson-in-leaflet.html"><a href="using-geojson-in-leaflet.html#loading-the-geojson-into-leaflet"><i class="fa fa-check"></i><b>5.6</b> Loading the GeoJSON into Leaflet</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="using-geojson-in-leaflet.html"><a href="using-geojson-in-leaflet.html#the-easy-way"><i class="fa fa-check"></i><b>5.6.1</b> The easy way</a></li>
<li class="chapter" data-level="5.6.2" data-path="using-geojson-in-leaflet.html"><a href="using-geojson-in-leaflet.html#using-the-ajax-plugin"><i class="fa fa-check"></i><b>5.6.2</b> Using the Ajax Plugin</a></li>
<li class="chapter" data-level="5.6.3" data-path="using-geojson-in-leaflet.html"><a href="using-geojson-in-leaflet.html#using-fetch-api"><i class="fa fa-check"></i><b>5.6.3</b> Using Fetch API</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="using-geojson-in-leaflet.html"><a href="using-geojson-in-leaflet.html#summary-4"><i class="fa fa-check"></i><b>5.7</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="create-your-own-custom-markers.html"><a href="create-your-own-custom-markers.html"><i class="fa fa-check"></i><b>6</b> Create your own custom markers</a>
<ul>
<li class="chapter" data-level="6.1" data-path="create-your-own-custom-markers.html"><a href="create-your-own-custom-markers.html#setting-the-base"><i class="fa fa-check"></i><b>6.1</b> Setting the base</a></li>
<li class="chapter" data-level="6.2" data-path="create-your-own-custom-markers.html"><a href="create-your-own-custom-markers.html#the-icons"><i class="fa fa-check"></i><b>6.2</b> The icons</a></li>
<li class="chapter" data-level="6.3" data-path="create-your-own-custom-markers.html"><a href="create-your-own-custom-markers.html#differentiate-custom-markers-on-a-webmap"><i class="fa fa-check"></i><b>6.3</b> Differentiate custom markers on a webmap</a></li>
<li class="chapter" data-level="6.4" data-path="create-your-own-custom-markers.html"><a href="create-your-own-custom-markers.html#using-fetch"><i class="fa fa-check"></i><b>6.4</b> Using fetch</a></li>
<li class="chapter" data-level="6.5" data-path="create-your-own-custom-markers.html"><a href="create-your-own-custom-markers.html#unique-custom-markers"><i class="fa fa-check"></i><b>6.5</b> Unique custom markers</a></li>
<li class="chapter" data-level="6.6" data-path="create-your-own-custom-markers.html"><a href="create-your-own-custom-markers.html#image-overlays"><i class="fa fa-check"></i><b>6.6</b> Image overlays</a></li>
<li class="chapter" data-level="6.7" data-path="create-your-own-custom-markers.html"><a href="create-your-own-custom-markers.html#summary-5"><i class="fa fa-check"></i><b>6.7</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="creating-an-interactive-choropleth-map.html"><a href="creating-an-interactive-choropleth-map.html"><i class="fa fa-check"></i><b>7</b> Creating an interactive choropleth map</a>
<ul>
<li class="chapter" data-level="7.1" data-path="creating-an-interactive-choropleth-map.html"><a href="creating-an-interactive-choropleth-map.html#what-is-a-choropleth-map"><i class="fa fa-check"></i><b>7.1</b> What is a choropleth map?</a></li>
<li class="chapter" data-level="7.2" data-path="creating-an-interactive-choropleth-map.html"><a href="creating-an-interactive-choropleth-map.html#creating-a-choropleth-map-the-start"><i class="fa fa-check"></i><b>7.2</b> Creating a choropleth map: the start</a></li>
<li class="chapter" data-level="7.3" data-path="creating-an-interactive-choropleth-map.html"><a href="creating-an-interactive-choropleth-map.html#coloring-the-counties"><i class="fa fa-check"></i><b>7.3</b> Coloring the counties</a></li>
<li class="chapter" data-level="7.4" data-path="creating-an-interactive-choropleth-map.html"><a href="creating-an-interactive-choropleth-map.html#highlight-features"><i class="fa fa-check"></i><b>7.4</b> Highlight features</a></li>
<li class="chapter" data-level="7.5" data-path="creating-an-interactive-choropleth-map.html"><a href="creating-an-interactive-choropleth-map.html#creating-a-custom-info"><i class="fa fa-check"></i><b>7.5</b> Creating a custom info</a></li>
<li class="chapter" data-level="7.6" data-path="creating-an-interactive-choropleth-map.html"><a href="creating-an-interactive-choropleth-map.html#create-a-legend"><i class="fa fa-check"></i><b>7.6</b> Create a legend</a></li>
<li class="chapter" data-level="7.7" data-path="creating-an-interactive-choropleth-map.html"><a href="creating-an-interactive-choropleth-map.html#summary-6"><i class="fa fa-check"></i><b>7.7</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="layer-groups-and-controls.html"><a href="layer-groups-and-controls.html"><i class="fa fa-check"></i><b>8</b> Layer groups and controls</a>
<ul>
<li class="chapter" data-level="8.1" data-path="layer-groups-and-controls.html"><a href="layer-groups-and-controls.html#purpose-of-layer-groups-and-controls"><i class="fa fa-check"></i><b>8.1</b> Purpose of layer groups and controls</a></li>
<li class="chapter" data-level="8.2" data-path="layer-groups-and-controls.html"><a href="layer-groups-and-controls.html#set-up-the-basemaps"><i class="fa fa-check"></i><b>8.2</b> Set up the basemaps</a></li>
<li class="chapter" data-level="8.3" data-path="layer-groups-and-controls.html"><a href="layer-groups-and-controls.html#creating-the-controls"><i class="fa fa-check"></i><b>8.3</b> Creating the controls</a></li>
<li class="chapter" data-level="8.4" data-path="layer-groups-and-controls.html"><a href="layer-groups-and-controls.html#adding-overlay-maps"><i class="fa fa-check"></i><b>8.4</b> Adding overlay maps</a></li>
<li class="chapter" data-level="8.5" data-path="layer-groups-and-controls.html"><a href="layer-groups-and-controls.html#add-a-scale-bar"><i class="fa fa-check"></i><b>8.5</b> Add a scale bar</a></li>
<li class="chapter" data-level="8.6" data-path="layer-groups-and-controls.html"><a href="layer-groups-and-controls.html#summary-7"><i class="fa fa-check"></i><b>8.6</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="heatmaps.html"><a href="heatmaps.html"><i class="fa fa-check"></i><b>9</b> Heatmaps</a>
<ul>
<li class="chapter" data-level="9.1" data-path="heatmaps.html"><a href="heatmaps.html#what-are-heatmaps"><i class="fa fa-check"></i><b>9.1</b> What are heatmaps?</a></li>
<li class="chapter" data-level="9.2" data-path="heatmaps.html"><a href="heatmaps.html#loading-the-heatmap-plugin"><i class="fa fa-check"></i><b>9.2</b> Loading the heatmap plugin</a></li>
<li class="chapter" data-level="9.3" data-path="heatmaps.html"><a href="heatmaps.html#creating-the-leaflet-heatmap"><i class="fa fa-check"></i><b>9.3</b> Creating the Leaflet heatmap</a></li>
<li class="chapter" data-level="9.4" data-path="heatmaps.html"><a href="heatmaps.html#summary-8"><i class="fa fa-check"></i><b>9.4</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="cluster-to-reduce-the-clutter.html"><a href="cluster-to-reduce-the-clutter.html"><i class="fa fa-check"></i><b>10</b> Cluster to reduce the clutter</a>
<ul>
<li class="chapter" data-level="10.1" data-path="cluster-to-reduce-the-clutter.html"><a href="cluster-to-reduce-the-clutter.html#a-map-full-of-clutter"><i class="fa fa-check"></i><b>10.1</b> A map full of clutter</a></li>
<li class="chapter" data-level="10.2" data-path="cluster-to-reduce-the-clutter.html"><a href="cluster-to-reduce-the-clutter.html#preparations"><i class="fa fa-check"></i><b>10.2</b> Preparations</a></li>
<li class="chapter" data-level="10.3" data-path="cluster-to-reduce-the-clutter.html"><a href="cluster-to-reduce-the-clutter.html#behold-a-cluster-marker-map"><i class="fa fa-check"></i><b>10.3</b> Behold, a cluster marker map!</a></li>
<li class="chapter" data-level="10.4" data-path="cluster-to-reduce-the-clutter.html"><a href="cluster-to-reduce-the-clutter.html#additional-features-of-cluster-marker-plugin"><i class="fa fa-check"></i><b>10.4</b> Additional features of Cluster marker plugin</a></li>
<li class="chapter" data-level="10.5" data-path="cluster-to-reduce-the-clutter.html"><a href="cluster-to-reduce-the-clutter.html#summary-9"><i class="fa fa-check"></i><b>10.5</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="mobile-friendly-webapps.html"><a href="mobile-friendly-webapps.html"><i class="fa fa-check"></i><b>11</b> Mobile Friendly Webapps</a>
<ul>
<li class="chapter" data-level="11.1" data-path="mobile-friendly-webapps.html"><a href="mobile-friendly-webapps.html#the-need-for-mobile-friendly-web-apps"><i class="fa fa-check"></i><b>11.1</b> The need for mobile friendly web apps</a></li>
<li class="chapter" data-level="11.2" data-path="mobile-friendly-webapps.html"><a href="mobile-friendly-webapps.html#the-basemaps"><i class="fa fa-check"></i><b>11.2</b> The basemaps</a></li>
<li class="chapter" data-level="11.3" data-path="mobile-friendly-webapps.html"><a href="mobile-friendly-webapps.html#adding-the-features"><i class="fa fa-check"></i><b>11.3</b> Adding the features</a></li>
<li class="chapter" data-level="11.4" data-path="mobile-friendly-webapps.html"><a href="mobile-friendly-webapps.html#zooming-to-mobile-users-location"><i class="fa fa-check"></i><b>11.4</b> Zooming to mobile user’s location</a></li>
<li class="chapter" data-level="11.5" data-path="mobile-friendly-webapps.html"><a href="mobile-friendly-webapps.html#add-marker-to-mobile-users-geolocation"><i class="fa fa-check"></i><b>11.5</b> Add marker to mobile user’s geolocation</a></li>
<li class="chapter" data-level="11.6" data-path="mobile-friendly-webapps.html"><a href="mobile-friendly-webapps.html#the-mobile-webmap-app-in-action"><i class="fa fa-check"></i><b>11.6</b> The mobile webmap app in action!</a></li>
<li class="chapter" data-level="11.7" data-path="mobile-friendly-webapps.html"><a href="mobile-friendly-webapps.html#summary-10"><i class="fa fa-check"></i><b>11.7</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="web-map-service-layers.html"><a href="web-map-service-layers.html"><i class="fa fa-check"></i><b>12</b> Web Map Service Layers</a>
<ul>
<li class="chapter" data-level="12.1" data-path="web-map-service-layers.html"><a href="web-map-service-layers.html#what-are-web-map-service-wms-layers"><i class="fa fa-check"></i><b>12.1</b> What are Web Map Service (WMS) Layers?</a></li>
<li class="chapter" data-level="12.2" data-path="web-map-service-layers.html"><a href="web-map-service-layers.html#loading-a-wms-server"><i class="fa fa-check"></i><b>12.2</b> Loading a WMS server</a></li>
<li class="chapter" data-level="12.3" data-path="web-map-service-layers.html"><a href="web-map-service-layers.html#adding-wms-to-layer-control"><i class="fa fa-check"></i><b>12.3</b> Adding WMS to layer control</a></li>
<li class="chapter" data-level="12.4" data-path="web-map-service-layers.html"><a href="web-map-service-layers.html#summary-11"><i class="fa fa-check"></i><b>12.4</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="standard-website-with-leaflet-project.html"><a href="standard-website-with-leaflet-project.html"><i class="fa fa-check"></i><b>13</b> Standard Website with Leaflet Project</a>
<ul>
<li class="chapter" data-level="13.1" data-path="standard-website-with-leaflet-project.html"><a href="standard-website-with-leaflet-project.html#get-the-html-template"><i class="fa fa-check"></i><b>13.1</b> Get the HTML Template</a></li>
<li class="chapter" data-level="13.2" data-path="standard-website-with-leaflet-project.html"><a href="standard-website-with-leaflet-project.html#embed-leaflet-to-standard-html-website"><i class="fa fa-check"></i><b>13.2</b> Embed Leaflet to standard html website</a></li>
<li class="chapter" data-level="13.3" data-path="standard-website-with-leaflet-project.html"><a href="standard-website-with-leaflet-project.html#editing-the-css"><i class="fa fa-check"></i><b>13.3</b> Editing the CSS</a></li>
<li class="chapter" data-level="13.4" data-path="standard-website-with-leaflet-project.html"><a href="standard-website-with-leaflet-project.html#embedding-leaflet-to-every-webpage"><i class="fa fa-check"></i><b>13.4</b> Embedding Leaflet to every webpage</a></li>
<li class="chapter" data-level="13.5" data-path="standard-website-with-leaflet-project.html"><a href="standard-website-with-leaflet-project.html#posting-the-html-website-to-the-world"><i class="fa fa-check"></i><b>13.5</b> Posting the Html website to the world</a></li>
<li class="chapter" data-level="13.6" data-path="standard-website-with-leaflet-project.html"><a href="standard-website-with-leaflet-project.html#summary-12"><i class="fa fa-check"></i><b>13.6</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="leaflet-in-esri.html"><a href="leaflet-in-esri.html"><i class="fa fa-check"></i><b>14</b> Leaflet in ESRI</a>
<ul>
<li class="chapter" data-level="14.1" data-path="leaflet-in-esri.html"><a href="leaflet-in-esri.html#esri-leaflet-plugins"><i class="fa fa-check"></i><b>14.1</b> ESRI Leaflet plugins</a></li>
<li class="chapter" data-level="14.2" data-path="leaflet-in-esri.html"><a href="leaflet-in-esri.html#creating-an-esri-leaflet-map"><i class="fa fa-check"></i><b>14.2</b> Creating an ESRI Leaflet map</a></li>
<li class="chapter" data-level="14.3" data-path="leaflet-in-esri.html"><a href="leaflet-in-esri.html#geocode-search"><i class="fa fa-check"></i><b>14.3</b> Geocode search</a></li>
<li class="chapter" data-level="14.4" data-path="leaflet-in-esri.html"><a href="leaflet-in-esri.html#add-search-bar"><i class="fa fa-check"></i><b>14.4</b> Add search bar</a></li>
<li class="chapter" data-level="14.5" data-path="leaflet-in-esri.html"><a href="leaflet-in-esri.html#make-the-search-bar-functional"><i class="fa fa-check"></i><b>14.5</b> Make the search bar functional</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>15</b> Conclusion</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Leaflet book</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="layer-groups-and-controls" class="section level1 hasAnchor" number="8">
<h1><span class="header-section-number">Chapter 8</span> Layer groups and controls<a href="layer-groups-and-controls.html#layer-groups-and-controls" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="purpose-of-layer-groups-and-controls" class="section level2 hasAnchor" number="8.1">
<h2><span class="header-section-number">8.1</span> Purpose of layer groups and controls<a href="layer-groups-and-controls.html#purpose-of-layer-groups-and-controls" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Sometimes, one may wish for their webmap to consist of several baselayers or overlay maps at any given time. Suppose you want your Leaflet to have two basemap layers, with the option of switching to either, and additionally, an overlay, how would you proceed?</p>
</div>
<div id="set-up-the-basemaps" class="section level2 hasAnchor" number="8.2">
<h2><span class="header-section-number">8.2</span> Set up the basemaps<a href="layer-groups-and-controls.html#set-up-the-basemaps" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In order to create controls, we have to set the control variables in JavaScript Objects. Thereafter, the <code>L.controls.layers</code> class is used to parse the object values to the Leaflet map and create a UI control. To demonstrate this, open a new JavaScript file and name it <code>groups_controls.js</code>. Insert the following code which will save our basemaps to the respective variables of <code>osm</code> and <code>cyclOSM</code>.</p>
<pre><code>var osm = L.tileLayer(&#39;https://tile.openstreetmap.org/{z}/{x}/{y}.png&#39;, {
    maxZoom: 19,
    attribution: &#39;&amp;copy; &lt;a href=&quot;http://www.openstreetmap.org/copyright&quot;&gt;OpenStreetMap&lt;/a&gt;&#39;
});

var cyclOSM = L.tileLayer(&#39;https://{s}.tile-cyclosm.openstreetmap.fr/cyclosm/{z}/{x}/{y}.png&#39;, {
    maxZoom: 20,
    attribution: &#39;&lt;a href=&quot;https://github.com/cyclosm/cyclosm-cartocss-style/releases&quot; title=&quot;CyclOSM - Open Bicycle render&quot;&gt;CyclOSM&lt;/a&gt; | Map data: &amp;copy; &lt;a href=&quot;https://www.openstreetmap.org/copyright&quot;&gt;OpenStreetMap&lt;/a&gt; contributors&#39;
}); // the CyclOSM tile layer available from Leaflet servers
</code></pre>
<p>We will pass the above two variables of <code>osm</code> and <code>cyclOSM</code> to the <code>L.map</code> class which has an option of <code>layers</code> in which one can parse the layers they wish to be displayed on the map.</p>
<pre><code>var map = L.map(&#39;myMap&#39;, {
    layers: [osm, cyclOSM]
}).setView([-1.295287148, 36.81984753], 7);
</code></pre>
<p>However, that will only add the first basemap variable that appears –that for <code>osm</code> and blocking out that of <code>cylcOSM</code>. This is shown below.</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="layer-groups-and-controls.html#cb110-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="fu">rep</span>(<span class="st">&#39;D:/gachuhi/my-leaflet/images/no-control.jpg&#39;</span>))</span></code></pre></div>
<p><img src="../images/no-control.jpg" width="958" /></p>
</div>
<div id="creating-the-controls" class="section level2 hasAnchor" number="8.3">
<h2><span class="header-section-number">8.3</span> Creating the controls<a href="layer-groups-and-controls.html#creating-the-controls" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>However, in order to give <code>cyclOSM</code> a fair chance, we need to store them in an object say <code>var basemaps</code> and parse it to <code>L.controls.layer</code> which shall create a checkbutton for each basemap. The below code does just that.</p>
<pre><code>// Set object for the basemaps
var basemaps = {
    &quot;OpenStreetMap&quot;: osm,
    &#39;cycleOsm&#39;: cyclOSM,
}

L.control.layers(basemaps).addTo(map);

</code></pre>
<p>This is the result you get.</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="layer-groups-and-controls.html#cb112-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="fu">rep</span>(<span class="st">&#39;D:/gachuhi/my-leaflet/images/controls.jpg&#39;</span>))</span></code></pre></div>
<p><img src="../images/controls.jpg" width="956" /></p>
</div>
<div id="adding-overlay-maps" class="section level2 hasAnchor" number="8.4">
<h2><span class="header-section-number">8.4</span> Adding overlay maps<a href="layer-groups-and-controls.html#adding-overlay-maps" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Now we have seen how to add two or more basemaps to Leaflet and make all of them appear in the layer control. As was the case for the <code>basemaps</code> variable, it can also be replicated for the overlay maps as well.</p>
<p>The first overlay we would like to create is a choropleth map displaying the percentage of conventional households with access to main sewers as per the <a href="https://housingfinanceafrica.org/app/uploads/VOLUME-IV-KPHC-2019.pdf">2019 census</a>. For simplicity purposes and to bypass errors we faced, we shall reuse the Ajax plugin for fetching GeoJSON files from online servers. As a reminder, we load Ajax into leaflet by inserting it to the following <code>&lt;script&gt;</code> tags into our <code>map.html</code>.</p>
<pre><code>&lt;script src=&quot;leaflet-ajax-gh-pages\dist\leaflet.ajax.js&quot;&gt;&lt;/script&gt;

&lt;script src=&quot;leaflet-ajax-gh-pages\dist\leaflet.ajax.min.js&quot;&gt;&lt;/script&gt;
        &lt;script src=&quot;leaflet-ajax-gh-pages\example\leaflet.spin.js&quot;&gt;&lt;/script&gt;
        &lt;script src=&quot;leaflet-ajax-gh-pages\example\spin.js&quot;&gt;&lt;/script&gt; </code></pre>
<p>Using <code>fetch</code> API to load the json file brought up several errors requiring out-of-the-box thinking to resolve, but using the alternative Ajax plugin was a safe landing. The following chunks of code will add the color function and styling for our countrywide sanitation map. The resulting coloring function shall be passed to the Ajax function.</p>
<pre><code>//// Adding some color
function getColor(d) {
    return d &gt; 20 ? &#39;#3288bd&#39; :
            d &gt; 10 ? &#39;#99d594&#39; :
            d &gt; 6 ? &#39;#e6f598&#39; :
            d &gt; 4 ? &#39;#fee08b&#39; :
            d &gt;  2 ? &#39;#fc8d59&#39;:
                     &#39;#d53e4f&#39;;
                       
}

// Function for setting color (using arrow function)
var style = ((feature)=&gt; {
    return {
        fillColor: getColor(feature.properties.Human_waste_disposal),
        weight: 2,
        opacity: 1,
        color: &#39;gray&#39;,
        fillOpacity: 0.9
    }
})
</code></pre>
<p>Now let’s add the overlay map that will display the population’s accessibility to main sewer sanitation services. Spoiler alert: the statistics are quite grim.</p>
<pre><code>// Adding the first overlay - map of household access to main sewer
var countySanitation = new L.geoJson.ajax(&quot;https://raw.githubusercontent.com/sammigachuhi/geojson_files/main/counties_sanitation.json&quot;, {
    style: style
})
.bindPopup(function (layer) {
            return `&lt;b&gt;County Name: &lt;/b&gt; ${layer.feature.properties.ADM1_EN} &lt;br&gt;
            &lt;b&gt;Total County Population: &lt;/b&gt;&lt;br&gt; 
            ${layer.feature.properties.County_pop.toString()} &lt;br&gt;&lt;br&gt;
            &lt;b&gt;% of Conventional Households with access to main sewer: &lt;/b&gt;&lt;br&gt;&lt;br&gt;
            ${layer.feature.properties.Human_waste_disposal.toString()}`
        }).addTo(map);
</code></pre>
<p>Let’s add an accompanying legend for the above map. If you worked through <a href="creating-an-interactive-choropleth-map.html#creating-an-interactive-choropleth-map">Chapter 7</a> that dealt with interactive choropleths, some of the below code should be very familiar.</p>
<pre><code>
// Create a legend
var legend = L.control({position: &#39;bottomright&#39;});

legend.onAdd = function (map) {
    var div = L.DomUtil.create(&#39;div&#39;, &#39;info legend&#39;),
    grades = [0, 2, 4, 6, 10, 20],
    labels = [];

    // loop through our density intervals and generate a label with a colored square for each interval
    for (var i = 0; i &lt; grades.length; i++) {
        div.innerHTML += 
            &#39;&lt;i style=&quot;background:&#39; + getColor(grades[i] + 1) + &#39;&quot;&gt;&lt;/i&gt; &#39; + 
            grades[i] + (grades[i + 1] ? &#39;&amp;ndash;&#39; + grades[i + 1] + &#39;&lt;br&gt;&#39; : &#39;+&#39;);
    }
    return div;
}

legend.addTo(map);</code></pre>
<p>Now set an object to hold one of our two overlay maps.</p>
<pre><code>var overlays = {
    &#39;countySanitation&#39;: countySanitation,
}
</code></pre>
<p>Finally parse it to the <code>L.controls.layer</code> class.</p>
<pre><code>// Add layer controls
L.control.layers(basemaps, overlays).addTo(map);</code></pre>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="layer-groups-and-controls.html#cb119-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="fu">rep</span>(<span class="st">&#39;D:/gachuhi/my-leaflet/images/controls-overlay.jpg&#39;</span>))</span></code></pre></div>
<p><img src="../images/controls-overlay.jpg" width="960" /></p>
<p>If you click in any one of the counties, you will see popups appear.</p>
<p>There is one more overaly we will add to our display to bring our experimentation with layer controls back full circle. Remember the GeoJSON of our <code>cities</code> variable? Let’s call it back to action. Load the custom icon markers first that will differentiate the populations of our cities.</p>
<pre><code>// Color icons
// Yellow Icon
var yellowIcon = new L.Icon({
    iconUrl: &#39;https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-yellow.png&#39;,
    shadowUrl: &#39;https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png&#39;,
    iconSize: [25, 41],
    iconAnchor: [12, 41],
    popupAnchor: [1, -34],
    shadowSize: [41, 41]
  });

// Orange Icon
var orangeIcon = new L.Icon({
    iconUrl: &#39;https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-orange.png&#39;,
    shadowUrl: &#39;https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png&#39;,
    iconSize: [25, 41],
    iconAnchor: [12, 41],
    popupAnchor: [1, -34],
    shadowSize: [41, 41]
  });

// Red Icon
var redIcon = new L.Icon({
    iconUrl: &#39;https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png&#39;,
    shadowUrl: &#39;https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png&#39;,
    iconSize: [25, 41],
    iconAnchor: [12, 41],
    popupAnchor: [1, -34],
    shadowSize: [41, 41]
  });
</code></pre>
<p>Let’s load the <code>cities</code> GeoJSON with its icons.</p>
<pre><code>var cities = L.geoJson.ajax(&quot;https://raw.githubusercontent.com/sammigachuhi/geojson_files/main/cities-geojson2.geojson.txt&quot;, {
    pointToLayer: function (feature, latlng) {
            if (feature.properties.Population &lt;= 250000) {
              return L.marker(latlng, {
                icon: yellowIcon 
              });
            } else if (feature.properties.Population &lt;= 800000) {
              return L.marker(latlng, {
                icon: orangeIcon 
              });
            } else {
              return L.marker(latlng, {
                icon: redIcon 
              });
            }
            
          }
}).bindPopup(function (layer) {
      return `City: ${layer.feature.properties.City},&lt;br&gt;
      Population: ${layer.feature.properties.Population}`;
    }).addTo(map);
    </code></pre>
<p>Add the <code>cities</code> variable as one of the keys to our <code>overlays</code> variable and finally parse the overlays object to <code>L.control.layers</code>.</p>
<pre><code>// Set object for the overlay maps
var overlays = {
    &#39;countySanitation&#39;: countySanitation,
    &#39;cities&#39;: cities
}

// Add layer controls
L.control.layers(basemaps, overlays).addTo(map);
</code></pre>
<p>In the previous <a href="creating-an-interactive-choropleth-map.html#creating-an-interactive-choropleth-map">chapter</a>, we ended by saying that we strive to make our choropleths map challenge rather than merely inform. This looks like a sketchy map, but it shows the discrepancy of access to basic sanitation services in a large portion of the population. Sanitation matters forever be sensitive, but the true barometer of any civilization is its sanitation.</p>
<p>Finally, it seems changing the position of the <code>L.controls.layer</code> from its default top-right position is impossible. For example, setting the position to left, in the <code>L.controls.layer(basemap, overlaymap, {position: 'topleft'})</code> results in the UI layers control disappearing completely off the map. This seems to be like a bug yet to be reported.</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="layer-groups-and-controls.html#cb123-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="fu">rep</span>(<span class="st">&#39;D:/gachuhi/my-leaflet/images/controls-all.jpg&#39;</span>))</span></code></pre></div>
<p><img src="../images/controls-all.jpg" width="960" /></p>
</div>
<div id="add-a-scale-bar" class="section level2 hasAnchor" number="8.5">
<h2><span class="header-section-number">8.5</span> Add a scale bar<a href="layer-groups-and-controls.html#add-a-scale-bar" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Scales are one of the key elements of any map. One may wonder what’s their use in a webmap, but they are useful in estimating size and length of features. Adding a small reactive scale will not hurt!</p>
<pre><code>// Add scale
L.control.scale({position:&#39;bottomleft&#39;}).addTo(map);</code></pre>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="layer-groups-and-controls.html#cb125-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="fu">rep</span>(<span class="st">&#39;D:/gachuhi/my-leaflet/images/controls-scale.jpg&#39;</span>))</span></code></pre></div>
<p><img src="../images/controls-scale.jpg" width="960" /></p>
<p>All the files and scripts used in this chapter can be accessed <a href="https://github.com/sammigachuhi/my-leaflet-project/tree/main/my-leaflet-code/chapter-8-layer_groups_and_controls">here</a>.</p>
</div>
<div id="summary-7" class="section level2 hasAnchor" number="8.6">
<h2><span class="header-section-number">8.6</span> Summary<a href="layer-groups-and-controls.html#summary-7" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Unlike paper maps, webmaps provide us the ability to include several basemaps and overlays all in one platform. Here’s is what you have learnt from this chapter.</p>
<ul>
<li><p>Several basemaps and overlays can be parsed into Leaflet by holding the basemap and overlay variable names in a JavaScript dictionary object.</p></li>
<li><p>To create a layers control, parse the JavaScript object containing the basemap and overlay names to the <code>L.control.layers()</code> class.</p></li>
<li><p>GeoJSON features can also be parsed to the layer control. All that is needed is to save the function calling the GeoJSON file into a variable. For example, the Ajax function <code>var cities</code> was parsed to the <code>L.control.layers()</code> class.</p></li>
<li><p>Scales are useful for size and length estimation, even in webmaps. Leaflet provides the <code>L.control.scale</code> class to add custom scales to your webmap.</p></li>
</ul>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="creating-an-interactive-choropleth-map.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="heatmaps.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/08-Creating_controls.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
